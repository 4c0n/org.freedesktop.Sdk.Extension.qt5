id: org.freedesktop.Sdk.Extension.qt5
branch: '21.08'
runtime: org.freedesktop.Sdk
runtime-version: '21.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.llvm13
build-extension: true
build-options:
  prefix: /usr/lib/sdk/qt5
  append-path: /usr/lib/sdk/qt5/bin:/usr/lib/sdk/llvm13/bin
  append-pkg-config-path: /usr/lib/sdk/qt5/lib/pkgconfig
  append-ld-library-path: /usr/lib/sdk/qt5/lib
  prepend-ld-library-path: /usr/lib/sdk/llvm13/lib
  cflags: -g0
  cxxflags: -g0
separate-locales: false
appstream-compose: false
modules:
  - name: qt-base
    buildsystem: autotools
    config-opts:
      - -confirm-license
      - -opensource
      - -shared
      - -platform
      - linux-g++
      - -optimized-qmake
      - -release
      - -nomake
      - tests
      - -system-harfbuzz
      - -system-sqlite
      - -accessibility
      - -dbus-linked
      - -fontconfig
      - -glib
      - -icu
      - -openssl-linked
      - -no-rpath
      - -no-directfb
      - -no-kms
      - -system-proxies
      - -gtk
      - -no-use-gold-linker
    sources:
      - type: git
        url: git://code.qt.io/qt/qtbase.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: c8989ca20fa5798f7853f07df6e150cc407c64a4
      - type: patch
        path: build-fixes-for-gcc11.patch
  - name: qt-declarative
    buildsystem: qmake
    sources:
      - type: git
        url: git://code.qt.io/qt/qtdeclarative.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 4bb06cfba94bcc9ddf30d968a227d00479d475b7
      - type: patch
        path: build-fixes-for-gcc11-qtdeclarative-001.patch
  - name: qt-tools
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qttools.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 36831ae742619e13db32ee6048d851bddee28a74
  - name: qt-base-docs
    buildsystem: simple
    build-commands:
      - ./configure --prefix=/usr/lib/sdk/qt5 -confirm-license -opensource
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtbase.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: c8989ca20fa5798f7853f07df6e150cc407c64a4
      - type: patch
        path: build-fixes-for-gcc11.patch
  - name: qt-declarative-docs
    buildsystem: simple
    build-commands:
      - qmake PREFIX=/usr/lib/sdk/qt5 qtdeclarative.pro
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtdeclarative.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 4bb06cfba94bcc9ddf30d968a227d00479d475b7
      - type: patch
        path: build-fixes-for-gcc11-qtdeclarative-001.patch
  - name: qt-script
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtscript.git
        tag: v5.15.9-lts
        x-checker-data:
          type: anitya
          project-id: 243108
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 4f8c35a528586541ea55bb8b3361eaa6749e52b1
  - name: qt-webchannel
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtwebchannel.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 2ff82955f2db732064b8ad7dbb81bda6017ef30c
  - name: qt-location
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtlocation.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 239786
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 1bf01b84e30aab2b87a19184ce42160e6c92d8b1
  - name: qt-svg
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtsvg.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: b4dfef869ab1ff25c8b511d52371d8b7a18d6902
  - name: qt-x11extras
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtx11extras.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: f628d7a60e45d90a439cb0a393a6229ac6892be5
  - name: qt-multimedia
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtmultimedia.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 239815
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: fa6c3d653682f9fd331d859c7196a291a8a4d8d5
  - name: qt-sensors
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtsensors.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 239824
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 975ba788d3d0ee87aa08bb5301cd33dcbf00521b
  - name: qt-quickcontrols
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtquickcontrols.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: d054de15b3c9ead0f96655ddfb1a6381ed7a0e2b
  - name: qt-quickcontrols2
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtquickcontrols2.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 453e302ea51a9f628ccb1382e812b09f259f890b
  - name: qt-graphicaleffects
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtgraphicaleffects.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 379577925766385991f413a2b0d0d46831381ffa
  - name: qt-xmlpatterns
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtxmlpatterns.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: af4958af9d628d6124e64abd9743abce42f15a6f
  - name: qt-imageformats
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtimageformats.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 7927
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 90038c936763645610fe1e5f05cfc025e4d98631
  - name: qt-connectivity
    buildsystem: qmake
    post-install:
      - make docs
      - make install_docs
    sources:
      - type: git
        url: git://code.qt.io/qt/qtconnectivity.git
        tag: v5.15.3-lts-lgpl
        x-checker-data:
          type: anitya
          project-id: 153467
          tag-template: v$version
          stable-only: true
          versions:
            <: 6.0.0
        commit: 4dcb2f232e00836830dcbffdc5dafbcde6607c08
    modules:
      # FIXME: Note: Bluez version is too old to support Bluetooth Low Energy.
      - name: bluez
        buildsystem: autotools
        config-opts:
          - --disable-tools
          - --disable-cups
          - --disable-monitor
          - --disable-client
          - --disable-systemd
          - --disable-udev
          - --disable-manpages
          - --disable-datafiles
          - --enable-health
          - --enable-library
        modules:
          - name: libical
            buildsystem: cmake-ninja
            builddir: true
            config-opts:
              - -DICAL_BUILD_DOCS=OFF
              - -DICAL_GLIB=OFF
              - -DWITH_CXX_BINDINGS=OFF
              - -DSHARED_ONLY=ON
            sources:
              - type: git
                url: https://github.com/libical/libical.git
                tag: v3.0.14
                commit: 098fb68688b853410daed96812a6fe0a22e0e15f
                x-checker-data:
                  type: anitya
                  project-id: 1637
                  tag-template: v$version
                  stable-only: true
        sources:
          - type: git
            url: https://github.com/bluez/bluez.git
            commit: da07239606d62526287d55f35a778770b04196ea
            x-checker-data:
              type: anitya
              project-id: 10029
              tag-template: $version
              stable-only: true
              tag: '5.63'
  - name: metainfo
    buildsystem: simple
    build-commands:
      - mkdir -p ${FLATPAK_DEST}/share/metainfo
      - cp org.freedesktop.Sdk.Extension.qt5.metainfo.xml ${FLATPAK_DEST}/share/metainfo
      - appstream-compose --basename=org.freedesktop.Sdk.Extension.qt5 --prefix=${FLATPAK_DEST} --origin=flatpak org.freedesktop.Sdk.Extension.qt5
    sources:
      - type: file
        path: org.freedesktop.Sdk.Extension.qt5.metainfo.xml
